<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="4.1 文件系统基础4.1.1文件的基本概念 文件是以硬盘为载体的存储再计算机上的信息集合 文件的结构（自底向上） 数据项——文件系统中最低级的数据组织形式 基本数据项——用于描述一个对象的某种属性的一个值，是数据中的最小逻辑单位 组合数据项——由多个基本数据项组成   记录——用一组相关的数据项的集合，用于描述一个对象在某方面的属性 文件——是指由创建者所定义的、具有文件名的一组相关元素的集">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统—第四章—文件系统基础">
<meta property="og:url" content="http://example.com/2023/09/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E7%AC%AC%E5%9B%9B%E7%AB%A0%E2%80%94%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="renmale-lv blog">
<meta property="og:description" content="4.1 文件系统基础4.1.1文件的基本概念 文件是以硬盘为载体的存储再计算机上的信息集合 文件的结构（自底向上） 数据项——文件系统中最低级的数据组织形式 基本数据项——用于描述一个对象的某种属性的一个值，是数据中的最小逻辑单位 组合数据项——由多个基本数据项组成   记录——用一组相关的数据项的集合，用于描述一个对象在某方面的属性 文件——是指由创建者所定义的、具有文件名的一组相关元素的集">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072118880.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072122718.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072005290.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072102374.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309071923970.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309071928068.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072012731.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072019910.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072031928.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072038470.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072048217.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309081556868.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309081604391.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309091359047.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309091424136.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309091427027.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309091437247.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309091448204.png">
<meta property="og:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309091503489.png">
<meta property="article:published_time" content="2023-09-10T04:27:13.000Z">
<meta property="article:modified_time" content="2023-09-12T07:02:35.495Z">
<meta property="article:author" content="renmale-lv">
<meta property="article:tag" content="操作系统">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/renmale-sztu/image/raw/master/202309072118880.png">

<link rel="canonical" href="http://example.com/2023/09/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E7%AC%AC%E5%9B%9B%E7%AB%A0%E2%80%94%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>操作系统—第四章—文件系统基础 | renmale-lv blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/atom.xml" title="renmale-lv blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">renmale-lv blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录学习点滴</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E7%AC%AC%E5%9B%9B%E7%AB%A0%E2%80%94%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="renmale-lv">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="renmale-lv blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          操作系统—第四章—文件系统基础
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-09-10 12:27:13" itemprop="dateCreated datePublished" datetime="2023-09-10T12:27:13+08:00">2023-09-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-09-12 15:02:35" itemprop="dateModified" datetime="2023-09-12T15:02:35+08:00">2023-09-12</time>
              </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>7 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <meta name="referrer" content="no-referrer">

<h1 id="4-1-文件系统基础"><a href="#4-1-文件系统基础" class="headerlink" title="4.1 文件系统基础"></a>4.1 文件系统基础</h1><h3 id="4-1-1文件的基本概念"><a href="#4-1-1文件的基本概念" class="headerlink" title="4.1.1文件的基本概念"></a>4.1.1文件的基本概念</h3><ul>
<li>文件是以硬盘为载体的存储再计算机上的信息集合</li>
<li>文件的结构（自底向上）<ul>
<li>数据项——文件系统中最低级的数据组织形式<ul>
<li>基本数据项——用于描述一个对象的某种属性的一个值，是数据中的最小逻辑单位</li>
<li>组合数据项——由多个基本数据项组成</li>
</ul>
</li>
<li>记录——用一组相关的数据项的集合，用于描述一个对象在某方面的属性</li>
<li>文件——是指由创建者所定义的、具有文件名的一组相关元素的集合<ul>
<li>有结构文件——文件由若干个相似的记录组成</li>
<li>无结构文件——被视为一个字符流</li>
</ul>
</li>
</ul>
</li>
</ul>
<span id="more"></span>
<h3 id="4-1-2文件控制块和索引节点"><a href="#4-1-2文件控制块和索引节点" class="headerlink" title="4.1.2文件控制块和索引节点"></a>4.1.2文件控制块和索引节点</h3><p><strong>文件的属性</strong></p>
<ul>
<li>名称——文件名称唯一，以容易读取的形式保存</li>
<li>类型——被支持不同类型的文件系统所使用</li>
<li>创建者——文件创建者的ID</li>
<li>所有者——文件当前所有者的ID</li>
<li>位置——指向设备和设备上文件的指针</li>
<li>大小——文件当前大小（用字节、字或块表示），也可包含文件允许的最大值</li>
<li>保护——对文件进行保护的访问控制信息。</li>
<li>创建时间、最后一次修改时间和最后一次存取时间——文件创建、上次修改和上次访问的相关信息，用户保护和追踪文件的使用</li>
</ul>
<p><strong>文件控制块FCB</strong></p>
<ul>
<li>包含<ul>
<li>基本信息，如文件名、文件的物理位置、文件的逻辑结构、文件的物理结构等</li>
<li>存取控制信息，包括文件主的存取权限、核准用户的存取权限以及一般用户的存取权限</li>
<li>使用信息，如文件建立时间、上次修改时间等</li>
</ul>
</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072118880.png" alt="image-20230907211855809"></li>
</ul>
<p><strong>索引节点</strong></p>
<ul>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072122718.png" alt="image-20230907212252695"></li>
<li>在检索目录的过程中，只用到了文件名，仅当找到一个目录项（其中的文件名与要查找的文件名匹配）时，才需从该目录项中读出该文件的物理地址。也就是说，在检索目录时，文件的其他描述信息不会用到，也不需要调入内存</li>
<li>采用文件名和文件描述信息分开的方法，使文件描述信息单独形成一个称为索引结点的数据结构，简称 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> 结点（inode)在文件目录中的每个目录项仅由文件名和指向该文件所对应的i结点的指针构成</li>
<li>有何用处<ul>
<li>假设一个FCB为64 B，盘块大小是1 KB</li>
<li>则每个盘块中可以存放16个FCB（FCB必须连续存放），若一个文件目录共有640个FCB，则查找文件平均需要启动磁盘20次</li>
<li>而在UNIX系统中，一个目录项仅占16 B，其中14 B是文件名，2 B是i结点指针。在1 KB的盘块中可存放64个目录项。这样，可使查找文件的平均启动磁盘次数减少到原来的1/4，大大节省了系统开销</li>
</ul>
</li>
<li>磁盘索引节点——存放在磁盘<ul>
<li>文件主标识符——拥有该文件的小人/小组的标识符</li>
<li>文件类型——包括普通文件、目录文件或特别文件</li>
<li>文件存取权限——各类用户对该文件的存取权限</li>
<li>文件物理地址——每个索引结点中含有13个地址项，即i.addr(0)～i.addr(12)，它们以直接或间接方式给出数据文件所在盘块的编号</li>
<li>文件长度——指以字节为单位的文件长度</li>
<li>文件链接计数——在本文件系统中所有指向该文件的文件名的指针计数</li>
<li>文件存取时间——本文件最近被进程存取的时间、最近被修改的时间及索引结点最近被修改的时间</li>
</ul>
</li>
<li>内存索引节点——文件打开后要将磁盘索引节点复制到内存中——新增内容<ul>
<li>索引结点编号——用于标识内存索引结点</li>
<li>状态——指示i结点是否上锁或被修改</li>
<li>访问计数——每当有一进程要访问此i结点时，计数加1；访问结束减1</li>
<li>逻辑设备号——文件所属文件系统的逻辑设备号</li>
<li>链接指针——设置分别指向空闲链表和散列队列的指针</li>
</ul>
</li>
</ul>
<h3 id="4-1-3文件的操作"><a href="#4-1-3文件的操作" class="headerlink" title="4.1.3文件的操作"></a>4.1.3文件的操作</h3><p><strong>文件的基本操作</strong></p>
<ul>
<li>创建文件（Create）<ol>
<li>为新文件分配必要的外存空间</li>
<li>在目录中为之创建一个目录项，目录项记录了新文件名、在外存中的地址及其他可能的信息</li>
</ol>
</li>
<li>写文件（Write）<ul>
<li>维护一个写位置的指针，每当发生写操作时就更新指针</li>
</ul>
</li>
<li>读文件（Read）<ul>
<li>维护一个读位置的指针，每当发生读操作时就更新指针</li>
<li>读和写使用同一个指针</li>
</ul>
</li>
<li>重新定位文件<ul>
<li>也称文件定位</li>
<li>搜索目录以找到适合的条目，并将当前文件位置指针重新定位到给定值</li>
<li>不涉及读、写文件</li>
</ul>
</li>
<li>删除文件（Delete)<ol>
<li>从目录中检索指定文件名的目录项</li>
<li>释放该文件所占的存储空间</li>
<li>删除目录条目</li>
</ol>
</li>
<li>截断文件<ul>
<li>允许文件所有属性不变，并删除文件内容，将其长度置为0并释放空间</li>
</ul>
</li>
</ul>
<p><strong>文件的打开与关闭</strong></p>
<ul>
<li>打开文件（Open）<ul>
<li>过程<ol>
<li>从目录中找到文件名对应的目录项，并检查该用户是否有指定的操作权限</li>
<li>将目录项复制到内存中的“打开文件表”中，并将对应表目的编号返回给用户，之后用户使用打开文件表的编号来指明要操作的文件</li>
</ol>
</li>
</ul>
</li>
<li>关闭文件<ul>
<li>过程<ol>
<li>将进程的打开文件表相应表项删除</li>
<li>回收分配给该文件的内存空间等资源</li>
<li>系统打开文件表的打开计数器count 减1，若 count = 0，则删除对应表项</li>
</ol>
</li>
</ul>
</li>
<li>打开文件表<ul>
<li>系统表<ul>
<li>包含FCB的副本和其他信息</li>
<li>系统打开文件表为每个文件关联一个打开计数器(Open Count），以记录多少进程打开了该文件。每个关闭操作close使count递减，当打开计数器为0时，表示该文件不再被使用，并且可从系统打开文件表中删除相应条目</li>
</ul>
</li>
<li>进程表<ul>
<li>根据它打开的所有文件，包含指向系统表中适当条目的指针</li>
<li>一旦有进程打开了一个文件，系统表就包含该文件的条目。当另一个进程执行调用open时，只不过是在其文件打开表中增加一个条目，并指向系统表的相应条目</li>
</ul>
</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072005290.png" alt="image-20230907200540327"></li>
</ul>
</li>
</ul>
<h3 id="4-1-4文件保护"><a href="#4-1-4文件保护" class="headerlink" title="4.1.4文件保护"></a>4.1.4文件保护</h3><ul>
<li>文件保护通过口令保护、加密保护和访问控制等方式实现。其中，口令和加密是为了防止用户文件被他人存取或窃取，而访问控制则用于控制用户对文件的访问方式</li>
<li>口令保护<ul>
<li>为文件设置一个“口令”（如：abc112233），用户请求访问该文件时必须提供“口令”</li>
<li>优点：保存口令的空间开销不多，验证口令的时间开销也很小</li>
<li>缺点：正确的“口令”存放在系统内部，不够安全</li>
</ul>
</li>
<li>加密保护<ul>
<li>使用某个“密码”对文件进行加密，在访问文件时需要提供正确的“密码”才能对文件进行正确的解密</li>
<li>异或加密<ul>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072102374.png" alt="image-20230907210231486"></li>
<li>优点：保密性强，不需要在系统内部存储”密码“</li>
<li>缺点：编码/译码（加密/解密）需要一定时间</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>访问类型</strong></p>
<ul>
<li>读——从文件中读</li>
<li>写——向文件中写</li>
<li>执行——将文件装入内存并执行</li>
<li>添加——将新信息添加到文件结尾部分</li>
<li>删除——删除文件，释放空间</li>
<li>列表清单——列出文件名和文件属性</li>
</ul>
<p><strong>访问控制</strong></p>
<ul>
<li>访问控制列表ACL（每个文件一个）<ul>
<li>根据用户身份进行控制</li>
<li>用户类型（精简版）<ul>
<li>拥有者——创建文件的用户</li>
<li>组——一组需要共享文件且具有类似访问的用户</li>
<li>其他——其他所有用户</li>
</ul>
</li>
</ul>
</li>
<li>用户访问该文件时，若用户是文件主，按照文件主所拥有的权限访问文件；若用户和文件主在同一个用户组，则按照同组权限访问，否则只能按其他用户权限访问。</li>
</ul>
<h3 id="4-1-5文件的逻辑结构"><a href="#4-1-5文件的逻辑结构" class="headerlink" title="4.1.5文件的逻辑结构"></a>4.1.5文件的逻辑结构</h3><ul>
<li>按逻辑结构，文件可划分为无结构文件和有结构文件</li>
</ul>
<p><strong>无结构文件（流式文件）</strong></p>
<ul>
<li>无结构文件是最简单的文件组织形式</li>
<li>以字节为单位</li>
<li>管理简单，用户可以方便地对其进行操作</li>
</ul>
<p><strong>有结构文件</strong></p>
<ul>
<li>由一组相似的记录组成，又称“记录式文件”。每条记录又若干个数据项组成。如：数据库表文件。一般来说，每条记录有一个数据项可作为关键字</li>
<li>顺序文件<ul>
<li>文件中的记录一个接一个地顺序排列（逻辑上），记录可以是定长的（通常）或可变长的。各个记录在物理上可以顺序存储或链式存储</li>
<li>串结构<ul>
<li>记录之间的顺序与关键字无关</li>
<li>必须从头开始顺序一次查找</li>
</ul>
</li>
<li>顺序结构<ul>
<li>文件中的所有记录按关键字顺序排列</li>
<li>可采用折半查找，提高检索效率</li>
</ul>
</li>
<li>每次要读或写一大批记录时，顺序文件的效率是所有逻辑文件中最高的</li>
<li>在经常需要查找、修改、增加或删除单个记录的场合，顺序文件的性能比较差</li>
<li>总结<ul>
<li>链式存储<ul>
<li>无法实现随机存取</li>
</ul>
</li>
<li>顺序存储<ul>
<li>可变长记录<ul>
<li>无法实现随机存取</li>
</ul>
</li>
<li>定长记录<ul>
<li>可实现随机存取</li>
<li>若采用串结构，无法快速找到某关键字对应的记录</li>
<li>采用顺序结构，可以快速找到某关键字对应的记录</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>索引文件<ul>
<li>可以建立一张索引表，为主文件的每个记录在索引表中分别设置一个表项，包含指向变长记录的指针（即逻辑起始地址）和记录长度，索引表按关键字排序，因此其本身也是一个定长记录的顺序文件。这样就把对变长记录顺序文件的检索转变为对定长记录索引文件的随机检索，从而加快了记录的检索速度</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309071923970.png" alt="image-20230907192350869"></li>
</ul>
</li>
<li>索引顺序文件<ul>
<li>索引顺序文件是顺序文件和索引文件的结合</li>
<li>索引顺序文件将顺序文件中的所有记录分为若干组，为顺序文件建立一张索引表，在索引表中为每组中的第一条记录建立一个索引项，其中包含该记录的关键字值和指向该记录的指针</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309071928068.png" alt="image-20230907192840027"></li>
<li>效率<ul>
<li>对于N个记录的文件的平均查找次数<ul>
<li>顺序文件——<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.271ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 1888 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(888,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1388,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></svg></mjx-container>次</li>
<li>索引顺序<ul>
<li>一级——<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="4.719ex" height="2.021ex" role="img" focusable="false" viewBox="0 -893.3 2085.9 893.3"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="TeXAtom" transform="translate(975.3,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(500,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1000,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></g></svg></mjx-container>次</li>
<li>二级——<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="4.719ex" height="2.021ex" role="img" focusable="false" viewBox="0 -893.3 2085.9 893.3"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="TeXAtom" transform="translate(975.3,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(500,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1000,0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></g></svg></mjx-container>次</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>索引文件和索引顺序文件都提高了存取的速度，但因为配置索引表而增加了存储空间</li>
</ul>
</li>
<li>直接文件或散列文件<ul>
<li>给定记录的键值或通过散列函数转换的键值直接决定记录的物理地址</li>
<li>散列文件有很高的存取速度，但是会引起冲突</li>
</ul>
</li>
</ul>
<h3 id="4-1-6文件的物理结构"><a href="#4-1-6文件的物理结构" class="headerlink" title="4.1.6文件的物理结构"></a>4.1.6文件的物理结构</h3><ul>
<li>很多操作系统中，磁盘块的大小与内存块、页面的大小相同</li>
</ul>
<p><strong>连续分配</strong></p>
<ul>
<li>连续分配方法要求每个文件在磁盘上占有一组连续的块</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072012731.png" alt="image-20230907201210731"></li>
<li>优点<ul>
<li>支持顺序访问和直接访问</li>
<li>实现简单、存取速度快</li>
</ul>
</li>
<li>缺点<ul>
<li>文件长度不宜动态增加，因为一个文件末尾后的盘块可能已分配给其他文件，一旦需要增加，就需要大量移动盘块</li>
<li>为保持文件的有序性，删除和插入记录时，需要对相邻的记录做物理上的移动，还会动态改变文件的长度</li>
<li>反复增删文件后会产生外部碎片</li>
<li>很难确定一个文件需要的空间大小，因而只适用于长度固定的文件</li>
</ul>
</li>
</ul>
<p><strong>链接分配</strong></p>
<ul>
<li>链接分配是采用离散分配的方式</li>
<li>隐式链接<ul>
<li>目录项中含有文件第一块的指针和最后一块的指针</li>
<li>每个文件对应一个磁盘块的链表</li>
<li>除最后一个盘块外，每个盘块都含有指向文件下一个盘块的指针，这些指针对用户透明</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072019910.png" alt="image-20230907201932754"></li>
<li>优点<ul>
<li>很方便文件拓展，不会有碎片问题，外存利用率高</li>
</ul>
</li>
<li>缺点<ul>
<li>只支持顺序访问，不支持随机访问，查找效率低，指向下一个盘块的指针也需要耗费少量的存储空间</li>
<li>稳定性——系统在运行过程中由于软件或硬件错误导致链表中的指针丢失或损坏，会导致文件数据的丢失</li>
</ul>
</li>
<li>解决方案——簇（cluster）<ul>
<li>将几个盘块组成簇，按簇而不按块来分配</li>
<li>增加了内部碎片</li>
<li>改善了许多算法的磁盘访问时间</li>
<li>应用于大多数系统</li>
</ul>
</li>
</ul>
</li>
<li>显示连接<ul>
<li>把用于链接文件各物理块的指针，从每个物理块的末尾中提取出来，显示地存放在内存的一张链接表中，该表在整个磁盘中仅设置一张，称为文件分配表（FAT）</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072031928.png" alt="image-20230907203124986"></li>
<li>优点<ul>
<li>FAT表常驻内存，因此显著提高了检索速度（查找记录在内存中进行），减少了访问磁盘的次数</li>
<li>支持顺序访问和随机访问</li>
<li>不会产生外部碎片，文件拓展方便</li>
</ul>
</li>
<li>缺点<ul>
<li>文件分配表占用一定的存储空间</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>索引分配</strong></p>
<ul>
<li>索引分配允许文件离散地分配在各个磁盘块中，系统会为每个文件建立一张索引表，索引表中记录了文件的各个逻辑块对应的物理块。索引表存放的磁盘块称为索引块。文件数据存放的磁盘块称为数据块。</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072038470.png" alt="image-20230907203846597"></li>
<li>优点——支持直接（随机）访问，没有外部碎片问题</li>
<li>缺点——由于索引块的分配，增加了存储空间的开销</li>
<li>解决方法——索引块应尽可能小，但太小无法支持大文件——索引表太大，一块索引块装不下<ul>
<li>链接方案<ul>
<li>将多个索引表连接起来</li>
<li>低效</li>
</ul>
</li>
<li>多层索引<ul>
<li>建立多层索引（原理类似于多级页表）。使第一层索引块指向第二层的索引块。还可根据文件大小的要求再建立第三层、第四层索引块</li>
<li>各层索引表大小不能超过一个磁盘块</li>
</ul>
</li>
<li>混合索引<ul>
<li>将多种索引分配方式相结合的分配方式</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>混合索引分配</strong></p>
<ul>
<li>全面照顾到小型、中型、大型文件<ul>
<li>其他方案如果是小型文件也需要占用多块物理块，且访问慢，需要多次寻址</li>
</ul>
</li>
<li>小文件——直接获得盘块地址（直接寻址）——提高访问速度</li>
<li>中型文件——单级索引</li>
<li>大型文件——多级索引</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309072048217.png" alt="image-20230907204811129"><ul>
<li>假设每个盘块4KB </li>
<li>直接块——4KB*10——i.addr(0)→i.addr(9)</li>
<li>一级间址——4MB——i.addr(10)</li>
<li>二级间址——4GB——i.addr(11)</li>
<li>三级间址——4TB——i.addr(12)</li>
</ul>
</li>
</ul>
<h1 id="4-2目录"><a href="#4-2目录" class="headerlink" title="4.2目录"></a>4.2目录</h1><h3 id="4-2-1-目录的基本概念"><a href="#4-2-1-目录的基本概念" class="headerlink" title="4.2.1 目录的基本概念"></a>4.2.1 目录的基本概念</h3><ul>
<li>FCB的有序集合称为文件目录</li>
</ul>
<h3 id="4-2-2-目录结构"><a href="#4-2-2-目录结构" class="headerlink" title="4.2.2 目录结构"></a>4.2.2 目录结构</h3><p><strong>单级目录结构</strong></p>
<ul>
<li>整个文件系统中只建立一张目录表，每个文件占一个目录项</li>
<li>建立一个新文件时，必须先检索所有目录项，以确保没有“重名”的情况，然后在该目录中增设一项，把新文件的属性信息填入到该项中</li>
<li>单级目录结构实现了“按名存取”，但是存在查找速度慢、文件不允许重名、不便于文件共享等缺点，而且对于多用户的操作系统显然是不适用的</li>
</ul>
<p><strong>两级目录结构</strong></p>
<ul>
<li>将文件目录分为主文件目录和用户文件目录</li>
<li>主文件目录项记录用户名及相应用户文件目录所在的存储位置</li>
<li>用户文件目录项记录该用户文件的不同FCB信息</li>
<li>提高了检索的速度，解决了多用户之间的文件重名问题，文件系统可以在目录上实现访问限制，但是缺乏灵活性，不能对文件分类</li>
</ul>
<p><strong>树形目录结构</strong></p>
<ul>
<li>绝对路径——从根目录出发的路径</li>
<li>相对路径——从当前目录出发</li>
<li>当前目录——解决了每次都从根目录开始查找的低效问题</li>
<li>优点——可以很方便地对文件进行分类，层次结构清晰，也能有效地进行文件的管理和保护</li>
<li>缺点——访问需要逐级访问中间节点，增加了磁盘访问次数；不便于实现文件共享</li>
<li>Windows、UNIX、Linux</li>
</ul>
<p><strong>无环图目录结构</strong></p>
<ul>
<li>可以用不同的文件名指向同一个文件</li>
<li>为每一个共享节点设置一个共享计数器<ul>
<li>增加对该节点的共享链时，计数器加一，删除节点时，计数器减一</li>
<li>计数器为0时才真正删除节点</li>
</ul>
</li>
<li>在共享文件中，各用户指向的是同一个文件，只要有一个用户修改了文件，所有用户都可以看到数据的变化</li>
<li>方便地实现了文件的共享，但使得系统的管理变得复杂</li>
</ul>
<h3 id="4-2-3目录的操作"><a href="#4-2-3目录的操作" class="headerlink" title="4.2.3目录的操作"></a>4.2.3目录的操作</h3><ul>
<li>搜索——当用户使用一个文件时，需要搜索目录，以找到该文件的对应目录项</li>
<li>创建文件——当创建一个新文件时，需要在目录中增加一个目录项</li>
<li>删除文件——当删除一个文件时，需要在目录中删除相应的目录项</li>
<li>创建目录——在树形目录结构中，用户可创建自己的用户文件目录，并可再创建子目录</li>
<li>删除目录——有两种方式<ul>
<li>不删除非空目录，删除时要先删除目录中的所有文件，并递归地删除子目录</li>
<li>可删除非空目录，目录中的文件和子目录同时被删除</li>
</ul>
</li>
<li>移动目录——将文件或子目录在不同的父目录之间移动，文件的路径名也会随之改变</li>
<li>显示目录——用户可以请求显示目录的内容，如显示该用户目录中的所有文件及属性</li>
<li>修改目录——某些文件属性保存在目录中，因而这些属性的变化需要改变相应的目录项</li>
</ul>
<h3 id="4-2-4目录的实现"><a href="#4-2-4目录的实现" class="headerlink" title="*4.2.4目录的实现"></a>*4.2.4目录的实现</h3><ul>
<li>线性列表</li>
<li>散列表</li>
</ul>
<h3 id="4-2-5文件共享"><a href="#4-2-5文件共享" class="headerlink" title="4.2.5文件共享"></a>4.2.5文件共享</h3><p><strong>基于索引节点的共享方式（硬链接）</strong></p>
<ul>
<li>文件的物理地址及其他的文件属性等信息，不再放在目录项中，而放在索引节点中，文件目录中只设置文件名及指向相应索引节点的指针</li>
<li>索引节点中还应该有一个链接技术count，用于表示链接到本索引节点上的用户目录项的数目</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309081556868.png" alt="image-20230908155627860"></li>
</ul>
<p><strong>利用符号链实现文件共享（软链接）</strong></p>
<ul>
<li>在一个Link型的文件中记录共享文件的存放路径（Windows快捷方式）</li>
<li>操作系统如果判断该文件是Link文件，则根据存放的路径去找到共享文件</li>
<li>Link文件被删除，共享文件仍存在，可以正常访问</li>
<li>共享文件被删除，Link文件仍存在，但会访问失败</li>
</ul>
<h1 id="4-3文件系统"><a href="#4-3文件系统" class="headerlink" title="4.3文件系统"></a>4.3文件系统</h1><h3 id="4-3-1文件系统结构"><a href="#4-3-1文件系统结构" class="headerlink" title="4.3.1文件系统结构"></a>4.3.1文件系统结构</h3><ul>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309081604391.png" alt="image-20230908160407336"></li>
<li>I/O控制<ul>
<li>包括设备驱动程序和中断处理程序，在内存和磁盘系统之间传输信息</li>
</ul>
</li>
<li>基本文件系统<ul>
<li>向对应的设备驱动程序发送通用命令，以读取和写入磁盘的物理块</li>
<li>管理内存缓冲区，并保存各种文件系统、目录和数据块的缓存</li>
</ul>
</li>
<li>文件组织模块<ul>
<li>组织文件及其逻辑块和物理块，可以将逻辑块地址转换为物理地址</li>
<li>包括空闲空间管理器，以跟踪未分配的块，根据需求提供给文件组织模块</li>
</ul>
</li>
<li>逻辑文件系统<ul>
<li>管理元数据信息，元数据包括文件系统的所有结构，而不包括实际数据</li>
<li>管理目录结构</li>
<li>通过文件控制块来维护文件系统</li>
<li>负责文件保护</li>
</ul>
</li>
</ul>
<h3 id="4-3-2文件系统布局"><a href="#4-3-2文件系统布局" class="headerlink" title="4.3.2文件系统布局"></a>4.3.2文件系统布局</h3><p><strong>文件系统在磁盘中的结构</strong></p>
<ul>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309091359047.png" alt="image-20230909135923327"></li>
<li>主引导记录（MBR）<ul>
<li>位于磁盘的0号扇区，用来引导计算机，MBR后面是分区表，该表给出每个分区的起始和结束地址</li>
<li>计算机启动时候，BIOS读入并执行MBR，MBR做的第一件事情是确定活动分区，读入它的第一块，即引导块</li>
</ul>
</li>
<li>引导块<ul>
<li>MBR执行引导块中的程序后，该程序负责启动该分区中的操作系统</li>
<li>每个分区都从一个引导快开始，即使该分区中不含可启动的操作系统</li>
<li>引导块之后的布局随着文件系统的不同而不同</li>
</ul>
</li>
<li>超级块<ul>
<li>包含文件系统的所有关键信息</li>
<li>计算机启动时/该文件系统首次使用时，超级块会被读入内存</li>
<li>典型信息<ul>
<li>分区的块的数量</li>
<li>块的大小</li>
<li>空闲块的数量和指针</li>
<li>空闲的FCB数量</li>
<li>FCB指针</li>
</ul>
</li>
<li>文件系统中空闲块的信息——用位视图或指针链接的形式给出</li>
<li>i结点——说明文件的方方面面</li>
<li>根目录——存放文件系统目录树的根部</li>
<li>其他部分——存放其他所有的目录和文件</li>
</ul>
</li>
</ul>
<p><strong>文件系统在内存中的结构</strong></p>
<ul>
<li>包含<ul>
<li>内存中的安装表——包含每个已安装文件系统分区的有关信息</li>
<li>内存中的目录结构的缓存——包含最近访问目录的信息，对安装分区的目录，可以包括一个指向分区表的指针</li>
<li>整个系统的打开文件表——包含每个打开文件的FCB副本及其他信息</li>
<li>每个进程的打开文件表——包含一个指向整个系统的打开文件表中的适当条目的指针，以及其他信息</li>
</ul>
</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309091424136.png" alt="image-20230909142413251"></li>
</ul>
<h3 id="4-3-3外存空闲空间管理"><a href="#4-3-3外存空闲空间管理" class="headerlink" title="4.3.3外存空闲空间管理"></a>4.3.3外存空闲空间管理</h3><ul>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309091427027.png" alt="image-20230909142757060"></li>
</ul>
<p><strong>空闲表法</strong></p>
<ul>
<li>属于连续分配方式，为每一个文件分配一块连续的存储空间</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309091437247.png" alt="image-20230909143728382"></li>
<li>可采用首次适应、最佳适应、最坏适应等算法来决定要为文件分配哪个空闲区</li>
<li>回收时需要注意表项的合并问题</li>
</ul>
<p><strong>空闲链表法</strong></p>
<ul>
<li>空闲盘块链<ul>
<li>将磁盘上所有的空闲空间以盘块为单位拉成一条链</li>
<li>分配空间时，系统从链首开始，依次摘下适当数目的空闲盘块分配给用户</li>
<li>回收时，将回收的盘块一次插入到链尾</li>
<li>优点——分配和回收一个盘块的过程非常简单</li>
<li>缺点——分配时可能要重复操作多次，效率低，以盘块为单位会导致空闲盘块链很长</li>
</ul>
</li>
<li>空闲盘区链<ul>
<li>将磁盘上的所有空闲盘区（一个盘区可能包含多个盘块）拉成一条链，每个盘区除含有指向下一个盘区的指针还有本盘区大小的信息</li>
<li>通常采用首次适应算法</li>
<li>回收时要注意与临近的盘块合并</li>
<li>分配和回收的过程较复杂，效率通常较高，且链表较短</li>
</ul>
</li>
</ul>
<p><strong>位示图法</strong></p>
<ul>
<li>利用二进制的一位来表示一个盘块的使用情况，磁盘上所有的盘块都有一个二进制位与之对应</li>
<li>0表示空闲，1表示已分配</li>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309091448204.png" alt="image-20230909144813185"></li>
<li>盘块的分配<ul>
<li>顺序扫描位示图，从中找出一个或一组为0的二进制位</li>
<li>将找到的二进制位转换为对应的盘块号，第i行第j列对应<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="11.493ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5079.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(600,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(989,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(1556.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(2556.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(3056.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3667.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(4667.9,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></svg></mjx-container>（n表示每行位数）</li>
<li>修改位示图</li>
</ul>
</li>
<li>盘块的回收<ul>
<li>将回收盘块的盘块号b转换成位示图中的行号和列号<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="36.789ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 16260.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(622.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(1678.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(2067.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2718.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(3719,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(4219,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4608,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(5108,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(5930.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(6930.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7430.4,0)"><g data-mml-node="mo"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">、</text></g></g><g data-mml-node="mi" transform="translate(8430.4,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g><g data-mml-node="mo" transform="translate(9120.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(10176,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(10565,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(11216.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(12216.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(12716.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(13105.4,0)"><path data-c="25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></g><g data-mml-node="mi" transform="translate(13938.4,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(14760.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(15760.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container></li>
<li>修改位示图</li>
</ul>
</li>
</ul>
<p><strong>成组链接法</strong></p>
<ul>
<li><p>空闲表法、空闲链表法不适用于大型文件系统，因为空闲表或空闲链表可能过大</p>
</li>
<li><p>结合了空闲表和空闲链表两种方法</p>
</li>
<li>用来存放一组空闲盘块号的盘块称为成组链块</li>
<li>思想<ul>
<li>把顺序的n个空闲盘块保存在第一个成组链块中，其最后一个空闲盘块（作为成组链块）用于保存另一组空闲盘块号</li>
</ul>
</li>
<li>假设所有盘块都是空闲盘块<ul>
<li><img src="https://gitee.com/renmale-sztu/image/raw/master/202309091503489.png" alt="image-20230909150338332"></li>
</ul>
</li>
<li>盘块的分配<ul>
<li>根据第一个成组链块的指针，将其对应的盘块分配给用户，然后将指针下移一格。若该指针指向的是最后一个盘块（即成组链块），由于该盘块记录的是下一组空闲盘块号，因此要将该盘块读入内存，并将指针指向新的成组链块的第一条记录，然后执行上述分配操作</li>
</ul>
</li>
<li>盘块的回收<ul>
<li>成组链块的指针上移一格，再记入回收盘块号。当成组链块的链接数达到n时，表示已满便将现有已记录n个空闲盘块号的成组链块号记入新回收的盘块（作为新的成组链块）</li>
</ul>
</li>
<li>表示空闲空间的位向量表或第一个成组链块，以及卷中的目录区、文件区划分信息都要存放在磁盘中，一般放在卷头位置，在UNIX系统中称为超级块</li>
</ul>
<h3 id="4-3-4虚拟文件系统（VFS）"><a href="#4-3-4虚拟文件系统（VFS）" class="headerlink" title="4.3.4虚拟文件系统（VFS）"></a>4.3.4虚拟文件系统（VFS）</h3><ul>
<li>VFS为用户程序提供了文件系统操作的统一接口，屏蔽了不同文件系统的差异和操作细节，用户程序可以通过VFS提供的同一调用函数来操作不同文件系统</li>
<li>采用面向对象思想，定义了通用文件系统都支持的接口，新的文件系统只要支持并实现这些接口，即可安装和使用</li>
<li>Linux抽象了四种对象类型，将不同文件系统的文件用同一种数据结构来表示<ul>
<li>超级块对象<ul>
<li>对应磁盘上特定扇区的文件系统超级块，用于存储已安装文件系统的元信息</li>
</ul>
</li>
<li>索引节点对象<ul>
<li>文件系统处理文件所需要的所有信息，对文件是唯一的</li>
<li>文件被访问时才创建</li>
<li>该表中设有一个状态字段表示文件是否被修改</li>
</ul>
</li>
<li>目录项对象<ul>
<li>提高VFS切换目录的效率</li>
</ul>
</li>
<li>文件对象<ul>
<li>代表进程打开的一个文件</li>
<li>同一文件在内存中可能存在多个对应的文件对象——多个进程打开和操作同一文件</li>
</ul>
</li>
</ul>
</li>
<li>文件系统挂载<ul>
<li>在VFS中注册新挂载的文件系统。内存中的挂载表（mount table）包含每个文件系统的相关信息，包括文件系统类型、容量大小等</li>
<li>新挂载的文件系统，要向VFS提供一个函数地址列表</li>
<li>将新文件系统加到挂载点（mountpoint），也就是将新文件系统挂载在某个父目录下</li>
</ul>
</li>
</ul>
<h3 id="4-3-5分区与安装"><a href="#4-3-5分区与安装" class="headerlink" title="4.3.5分区与安装"></a>4.3.5分区与安装</h3><ul>
<li>一个磁盘可以划分为多个分区，每个分区都可以用于创建单独的文件系统，每个分区还可以包含不同的操作系统</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag"># 操作系统</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/09/06/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E7%AC%AC%E4%B8%89%E7%AB%A0%E2%80%94%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="prev" title="操作系统—第三章—内存管理">
      <i class="fa fa-chevron-left"></i> 操作系统—第三章—内存管理
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/09/12/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E7%AC%AC%E4%BA%94%E7%AB%A0%E2%80%94%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%EF%BC%88IO%EF%BC%89%E7%AE%A1%E7%90%86/" rel="next" title="操作系统—第五章—输入输出（IO）管理">
      操作系统—第五章—输入输出（IO）管理 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#4-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80"><span class="nav-text">4.1 文件系统基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-1%E6%96%87%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">4.1.1文件的基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-2%E6%96%87%E4%BB%B6%E6%8E%A7%E5%88%B6%E5%9D%97%E5%92%8C%E7%B4%A2%E5%BC%95%E8%8A%82%E7%82%B9"><span class="nav-text">4.1.2文件控制块和索引节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-3%E6%96%87%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">4.1.3文件的操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-4%E6%96%87%E4%BB%B6%E4%BF%9D%E6%8A%A4"><span class="nav-text">4.1.4文件保护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-5%E6%96%87%E4%BB%B6%E7%9A%84%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84"><span class="nav-text">4.1.5文件的逻辑结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-6%E6%96%87%E4%BB%B6%E7%9A%84%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84"><span class="nav-text">4.1.6文件的物理结构</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-2%E7%9B%AE%E5%BD%95"><span class="nav-text">4.2目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-1-%E7%9B%AE%E5%BD%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">4.2.1 目录的基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-2-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-text">4.2.2 目录结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-3%E7%9B%AE%E5%BD%95%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">4.2.3目录的操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-4%E7%9B%AE%E5%BD%95%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-text">*4.2.4目录的实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-5%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB"><span class="nav-text">4.2.5文件共享</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">4.3文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-1%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84"><span class="nav-text">4.3.1文件系统结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-2%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%B8%83%E5%B1%80"><span class="nav-text">4.3.2文件系统布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-3%E5%A4%96%E5%AD%98%E7%A9%BA%E9%97%B2%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86"><span class="nav-text">4.3.3外存空闲空间管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-4%E8%99%9A%E6%8B%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%88VFS%EF%BC%89"><span class="nav-text">4.3.4虚拟文件系统（VFS）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-5%E5%88%86%E5%8C%BA%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="nav-text">4.3.5分区与安装</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">renmale-lv</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">25</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">renmale-lv</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">225k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">3:24</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
